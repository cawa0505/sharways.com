{"version":3,"file":"js/configuration/employee/pay-head/edit.js","sources":["webpack:///resources/js/views/configuration/employee/pay-head/form.vue"],"sourcesContent":["<template>\r\n    <form @submit.prevent=\"proceed\" @keydown=\"payHeadForm.errors.clear($event.target.name)\">\r\n        <div class=\"row\">\r\n            <div class=\"col-12 col-sm-4\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"\">{{trans('employee.pay_head_name')}}</label>\r\n                    <input class=\"form-control\" type=\"text\" v-model=\"payHeadForm.name\" name=\"name\" :placeholder=\"trans('employee.pay_head_name')\">\r\n                    <show-error :form-name=\"payHeadForm\" prop-name=\"name\"></show-error>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12 col-sm-4\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"\">{{trans('employee.pay_head_alias')}}</label>\r\n                    <input class=\"form-control\" type=\"text\" v-model=\"payHeadForm.alias\" name=\"alias\" :placeholder=\"trans('employee.pay_head_alias')\">\r\n                    <show-error :form-name=\"payHeadForm\" prop-name=\"alias\"></show-error>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12 col-sm-4\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"\">{{trans('employee.pay_head_type')}}</label>\r\n                    <select v-model=\"payHeadForm.type\" class=\"custom-select col-12\" name=\"type\" @change=\"payHeadForm.errors.clear('type')\">\r\n                      <option value=\"null\">{{trans('general.select_one')}}</option>\r\n                      <option v-for=\"option in types\" v-bind:value=\"option.value\">\r\n                        {{ option.text }}\r\n                      </option>\r\n                    </select>\r\n                    <show-error :form-name=\"payHeadForm\" prop-name=\"type\"></show-error>\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12 col-sm-4\">\r\n                <div class=\"form-group\">\r\n                    <switches class=\"m-l-20\" v-model=\"payHeadForm.is_active\" theme=\"bootstrap\" color=\"success\"></switches> {{trans('employee.pay_head_is_active')}}\r\n                </div>\r\n            </div>\r\n            <div class=\"col-12 col-sm-12\">\r\n                <div class=\"form-group\">\r\n                    <label for=\"\">{{trans('employee.pay_head_description')}}</label>\r\n                    <input class=\"form-control\" type=\"text\" v-model=\"payHeadForm.description\" name=\"description\" :placeholder=\"trans('employee.pay_head_description')\">\r\n                    <show-error :form-name=\"payHeadForm\" prop-name=\"description\"></show-error>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"card-footer text-right\">\r\n            <router-link to=\"/configuration/employee/pay/head\" class=\"btn btn-danger waves-effect waves-light \" v-show=\"id\">{{trans('general.cancel')}}</router-link>\r\n            <button v-if=\"!id\" type=\"button\" class=\"btn btn-danger waves-effect waves-light \" @click=\"$emit('cancel')\">{{trans('general.cancel')}}</button>\r\n            <button type=\"submit\" class=\"btn btn-info waves-effect waves-light\">\r\n                <span v-if=\"id\">{{trans('general.update')}}</span>\r\n                <span v-else>{{trans('general.save')}}</span>\r\n            </button>\r\n        </div>\r\n    </form>\r\n</template>\r\n\r\n\r\n<script>\r\n    import switches from 'vue-switches'\r\n\r\n    export default {\r\n        components: {switches},\r\n        data() {\r\n            return {\r\n                payHeadForm: new Form({\r\n                    name : '',\r\n                    alias: '',\r\n                    type: null,\r\n                    is_active: 0,\r\n                    description : ''\r\n                }),\r\n                types: [\r\n                    {\r\n                        text: i18n.employee.pay_head_type_earning,\r\n                        value: 'earning'\r\n                    },\r\n                    {\r\n                        text: i18n.employee.pay_head_type_deduction,\r\n                        value: 'deduction'\r\n                    }\r\n                ]\r\n            };\r\n        },\r\n        props: ['id'],\r\n        mounted() {\r\n            if(this.id)\r\n                this.get();\r\n        },\r\n        methods: {\r\n            proceed(){\r\n                if(this.id)\r\n                    this.update();\r\n                else\r\n                    this.store();\r\n            },\r\n            store(){\r\n                let loader = this.$loading.show();\r\n                this.payHeadForm.post('/api/employee/pay/head')\r\n                    .then(response => {\r\n                        toastr.success(response.message);\r\n                        this.$emit('completed');\r\n                        this.payHeadForm.type = null;\r\n                        loader.hide();\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            },\r\n            get(){\r\n                let loader = this.$loading.show();\r\n                axios.get('/api/employee/pay/head/'+this.id)\r\n                    .then(response => {\r\n                        this.payHeadForm.name = response.name;\r\n                        this.payHeadForm.alias = response.alias;\r\n                        this.payHeadForm.type = response.type;\r\n                        this.payHeadForm.is_active = response.is_active;\r\n                        this.payHeadForm.description = response.description;\r\n                        loader.hide();\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                        this.$router.push('/configuration/employee/pay/head');\r\n                    });\r\n            },\r\n            update(){\r\n                let loader = this.$loading.show();\r\n                this.payHeadForm.patch('/api/employee/pay/head/'+this.id)\r\n                    .then(response => {\r\n                        toastr.success(response.message);\r\n                        loader.hide();\r\n                        this.$router.push('/configuration/employee/pay/head');\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// resources/js/views/configuration/employee/pay-head/form.vue"],"mappings":"AAuDA","sourceRoot":""}