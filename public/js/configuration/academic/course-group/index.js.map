{"version":3,"file":"js/configuration/academic/course-group/index.js","sources":["webpack:///resources/js/views/configuration/academic/course-group/index.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"page-titles\">\r\n            <div class=\"row\">\r\n                <div class=\"col-12 col-sm-6\">\r\n                    <h3 class=\"text-themecolor\">{{trans('academic.course_group')}}\r\n                        <span class=\"card-subtitle d-none d-sm-inline\" v-if=\"course_groups.total\">{{trans('general.total_result_found',{count : course_groups.total, from: course_groups.from, to: course_groups.to})}}</span>\r\n                        <span class=\"card-subtitle d-none d-sm-inline\" v-else>{{trans('general.no_result_found')}}</span>\r\n                    </h3>\r\n                </div>\r\n                <div class=\"col-12 col-sm-6\">\r\n                    <div class=\"action-buttons pull-right\">\r\n                        <button class=\"btn btn-info btn-sm\" v-if=\"course_groups.total && !showCreatePanel\" @click=\"showCreatePanel = !showCreatePanel\" v-tooltip=\"trans('general.add_new')\"><i class=\"fas fa-plus\"></i> <span class=\"d-none d-sm-inline\">{{trans('academic.add_new_course_group')}}</span></button>\r\n                        <button class=\"btn btn-info btn-sm\" v-if=\"course_groups.total\" @click=\"showReorderModal = true\" v-tooltip=\"trans('academic.reorder_course_group')\"><i class=\"fas fa-arrows-alt\"></i> <span class=\"d-none d-sm-inline\">{{trans('academic.reorder_course_group')}}</span></button>\r\n                        <sort-by :order-by-options=\"orderByOptions\" :sort-by=\"filter.sort_by\" :order=\"filter.order\" @updateSortBy=\"value => {filter.sort_by = value}\"  @updateOrder=\"value => {filter.order = value}\"></sort-by>\r\n                        <div class=\"btn-group\">\r\n                            <button type=\"button\" class=\"btn btn-info btn-sm dropdown-toggle no-caret \" role=\"menu\" id=\"moreOption\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" v-tooltip=\"trans('general.more_option')\">\r\n                                <i class=\"fas fa-ellipsis-h\"></i> <span class=\"d-none d-sm-inline\"></span>\r\n                            </button>\r\n                            <div :class=\"['dropdown-menu',getConfig('direction') == 'ltr' ? 'dropdown-menu-right' : '']\" aria-labelledby=\"moreOption\">\r\n                                <button class=\"dropdown-item custom-dropdown\" @click=\"print\"><i class=\"fas fa-print\"></i> {{trans('general.print')}}</button>\r\n                                <button class=\"dropdown-item custom-dropdown\" @click=\"pdf\"><i class=\"fas fa-file-pdf\"></i> {{trans('general.generate_pdf')}}</button>\r\n                            </div>\r\n                        </div>\r\n                        <help-button @clicked=\"help_topic = 'configuration.academic.course-group'\"></help-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"container-fluid\">\r\n            <transition name=\"fade\">\r\n                <div class=\"card card-form\" v-if=\"showCreatePanel\">\r\n                    <div class=\"card-body\">\r\n                        <h4 class=\"card-title\">{{trans('academic.add_new_course_group')}}</h4>\r\n                        <course-group-form @completed=\"getCourseGroups\" @cancel=\"showCreatePanel = !showCreatePanel\"></course-group-form>\r\n                    </div>\r\n                </div>\r\n            </transition>\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"table-responsive\" v-if=\"course_groups.total\">\r\n                        <table class=\"table table-sm\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>{{trans('academic.course_group_name')}}</th>\r\n                                    <th>{{trans('academic.course')}}</th>\r\n                                    <th>{{trans('academic.course_group_description')}}</th>\r\n                                    <th class=\"table-option\">{{trans('general.action')}}</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"course_group in course_groups.data\">\r\n                                    <td>\r\n                                        {{course_group.name}}\r\n                                    </td>\r\n                                    <td>\r\n                                        <ul style=\"list-style:none;padding:0;margin:0;\">\r\n                                            <li v-for=\"course in course_group.courses\">{{course.name}}</li>\r\n                                        </ul>\r\n                                    </td>\r\n                                    <td v-text=\"course_group.description\"></td>\r\n                                    <td class=\"table-option\">\r\n                                        <div class=\"btn-group\">\r\n                                            <button class=\"btn btn-info btn-sm\" v-tooltip=\"trans('academic.edit_course_group')\" @click.prevent=\"editCourseGroup(course_group)\"><i class=\"fas fa-edit\"></i></button>\r\n                                            <button class=\"btn btn-danger btn-sm\" :key=\"course_group.id\" v-confirm=\"{ok: confirmDelete(course_group)}\" v-tooltip=\"trans('academic.delete_course_group')\"><i class=\"fas fa-trash\"></i></button>\r\n                                        </div>\r\n                                    </td>\r\n                                </tr>\r\n                            </tbody>\r\n                        </table>\r\n                    </div>\r\n                    <module-info v-if=\"!course_groups.total\" module=\"academic\" title=\"course_group_module_title\" description=\"course_group_module_description\" icon=\"list\">\r\n                        <div slot=\"btn\">\r\n                            <button class=\"btn btn-info btn-md\" v-if=\"!showCreatePanel\" @click=\"showCreatePanel = !showCreatePanel\"><i class=\"fas fa-plus\"></i> {{trans('general.add_new')}}</button>\r\n                        </div>\r\n                    </module-info>\r\n                    <pagination-record :page-length.sync=\"filter.page_length\" :records=\"course_groups\" @updateRecords=\"getCourseGroups\" @change.native=\"getCourseGroups\"></pagination-record>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n        <transition name=\"modal\" v-if=\"showReorderModal\">\r\n            <div class=\"modal-mask\">\r\n                <div class=\"modal-wrapper\">\r\n                    <div class=\"modal-container modal-lg\">\r\n                        <div class=\"modal-header\">\r\n                            <slot name=\"header\">\r\n                                {{trans('academic.reorder_course_group')}}\r\n                                <span class=\"float-right pointer\" @click=\"showReorderModal = false\">x</span>\r\n                            </slot>\r\n                        </div>\r\n                        <div class=\"modal-body\">\r\n                            <slot name=\"body\">\r\n                                <draggable v-model=\"list\" @start=\"drag=true\" @end=\"drag=false\" class=\"list-group\">\r\n                                    <div class=\"list-group-item pointer\" v-for=\"item in list\" :key=\"item.id\"><i class=\"fas fa-arrows-alt\"></i> {{item}}</div>\r\n                                </draggable>\r\n                                <button type=\"button\" class=\"btn btn-info pull-right m-t-10\" @click=\"reorderCourseGroup\">{{trans('general.save')}}</button>\r\n                            </slot>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </transition>\r\n\r\n        <right-panel :topic=\"help_topic\"></right-panel>\r\n    </div>\r\n</template>\r\n\r\n\r\n<script>\r\n    import courseGroupForm from './form'\r\n    import draggable from 'vuedraggable'\r\n\r\n    export default {\r\n        components : { courseGroupForm,draggable },\r\n        data() {\r\n            return {\r\n                course_groups: {\r\n                    total: 0,\r\n                    data: []\r\n                },\r\n                filter: {\r\n                    sort_by : 'position',\r\n                    order: 'asc',\r\n                    page_length: helper.getConfig('page_length')\r\n                },\r\n                orderByOptions: [\r\n                    {\r\n                        value: 'position',\r\n                        translation: i18n.academic.course_group_order\r\n                    },\r\n                    {\r\n                        value: 'name',\r\n                        translation: i18n.academic.course_group_name\r\n                    }\r\n                ],\r\n                showCreatePanel: false,\r\n                showReorderModal: false,\r\n                list: [],\r\n                help_topic: ''\r\n            };\r\n        },\r\n        mounted(){\r\n            if(!helper.hasPermission('access-configuration')){\r\n                helper.notAccessibleMsg();\r\n                this.$router.push('/dashboard');\r\n            }\r\n\r\n            this.getCourseGroups();\r\n        },\r\n        methods: {\r\n            getCourseGroups(page){\r\n                let loader = this.$loading.show();\r\n                if (typeof page !== 'number') {\r\n                    page = 1;\r\n                }\r\n                let url = helper.getFilterURL(this.filter);\r\n                axios.get('/api/academic/course/group?page=' + page + url)\r\n                    .then(response => {\r\n                        this.list = [];\r\n                        this.course_groups = response;\r\n                        this.course_groups.data.forEach(course_group => {\r\n                            this.list.push(course_group.name);\r\n                        })\r\n                        loader.hide();\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            },\r\n            editCourseGroup(course_group){\r\n                this.$router.push('/configuration/academic/course/group/'+course_group.id+'/edit');\r\n            },\r\n            confirmDelete(course_group){\r\n                return dialog => this.deleteCourseGroup(course_group);\r\n            },\r\n            deleteCourseGroup(course_group){\r\n                let loader = this.$loading.show();\r\n                axios.delete('/api/academic/course/group/'+course_group.id)\r\n                    .then(response => {\r\n                        toastr.success(response.message);\r\n                        this.getCourseGroups();\r\n                        loader.hide();\r\n                    }).catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            },\r\n            getConfig(config){\r\n                return helper.getConfig(config);\r\n            },\r\n            print(){\r\n                let loader = this.$loading.show();\r\n                axios.post('/api/academic/course/group/print',{filter: this.filter})\r\n                    .then(response => {\r\n                        let print = window.open(\"/print\");\r\n                        loader.hide();\r\n                        print.document.write(response);\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            },\r\n            pdf(){\r\n                let loader = this.$loading.show();\r\n                axios.post('/api/academic/course/group/pdf',{filter: this.filter})\r\n                    .then(response => {\r\n                        loader.hide();\r\n                        window.open('/download/report/'+response+'?token='+this.authToken);\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            },\r\n            reorderCourseGroup(){\r\n                axios.post('/api/academic/course/group/reorder',{list: this.list})\r\n                    .then(response => {\r\n                        toastr.success(response.message);\r\n                        this.showReorderModal = false;\r\n                        this.getCourseGroups();\r\n                    })\r\n                    .catch(error => {\r\n                        helper.showErrorMsg(error);\r\n                    })\r\n            }\r\n        },\r\n        filters: {\r\n          momentDateTime(date) {\r\n            return helper.formatDateTime(date);\r\n          }\r\n        },\r\n        watch: {\r\n            'filter.sort_by': function(val){\r\n                this.getCourseGroups();\r\n            },\r\n            'filter.order': function(val){\r\n                this.getCourseGroups();\r\n            },\r\n            'filter.page_length': function(val){\r\n                this.getCourseGroups();\r\n            }\r\n        },\r\n        computed: {\r\n            authToken(){\r\n                return helper.getAuthToken();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// resources/js/views/configuration/academic/course-group/index.vue"],"mappings":"AA8GA","sourceRoot":""}