{"version":3,"file":"js/finance/transaction/report/day-book.js","sources":["webpack:///resources/js/views/finance/transaction/report/day-book.vue"],"sourcesContent":["<template>\r\n    <div>\r\n        <div class=\"page-titles\">\r\n            <div class=\"row\">\r\n                <div class=\"col-12 col-sm-6\">\r\n                    <h3 class=\"text-themecolor\">{{trans('finance.transaction_day_book_report')}} \r\n                        <span class=\"card-subtitle d-none d-sm-inline\" v-if=\"list.total\">{{trans('general.total_result_found',{count : list.total, from: list.from, to: list.to})}}</span>\r\n                        <span class=\"card-subtitle d-none d-sm-inline\" v-else>{{trans('general.no_result_found')}}</span>\r\n                    </h3>\r\n                </div>\r\n                <div class=\"col-12 col-sm-6\">\r\n                    <div class=\"action-buttons pull-right\">\r\n                        <button class=\"btn btn-info btn-sm\" v-if=\"!showFilterPanel\" @click=\"showFilterPanel = !showFilterPanel\"><i class=\"fas fa-filter\"></i> <span class=\"d-none d-sm-inline\">{{trans('general.filter')}}</span></button>\r\n                        <sort-by :order-by-options=\"orderByOptions\" :sort-by=\"filter.sort_by\" :order=\"filter.order\" @updateSortBy=\"value => {filter.sort_by = value}\"  @updateOrder=\"value => {filter.order = value}\"></sort-by>\r\n                        <div class=\"btn-group\">\r\n                            <button type=\"button\" class=\"btn btn-info btn-sm dropdown-toggle no-caret \" role=\"menu\" id=\"moreOption\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\" v-tooltip=\"trans('general.more_option')\">\r\n                                <i class=\"fas fa-ellipsis-h\"></i> <span class=\"d-none d-sm-inline\"></span>\r\n                            </button>\r\n                            <div :class=\"['dropdown-menu',getConfig('direction') == 'ltr' ? 'dropdown-menu-right' : '']\" aria-labelledby=\"moreOption\">\r\n                                <button class=\"dropdown-item custom-dropdown\" @click=\"print\"><i class=\"fas fa-print\"></i> {{trans('general.print')}}</button>\r\n                                <button class=\"dropdown-item custom-dropdown\" @click=\"pdf\"><i class=\"fas fa-file-pdf\"></i> {{trans('general.generate_pdf')}}</button>\r\n                            </div>\r\n                        </div>\r\n                        <help-button @clicked=\"help_topic = 'finance.transaction.report.day_book'\"></help-button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"container-fluid\">\r\n            <transition name=\"fade\">\r\n                <div class=\"card card-form\" v-if=\"showFilterPanel\">\r\n                    <div class=\"card-body\">\r\n                        <h4 class=\"card-title\">{{trans('general.filter')}}</h4>\r\n                        <div class=\"row\">\r\n                            <div class=\"col-12 col-sm-4\">\r\n                                <div class=\"form-group\">\r\n                                    <datepicker v-model=\"filter.date\" :bootstrapStyling=\"true\"></datepicker>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div class=\"card-footer text-right\">\r\n                            <button type=\"button\" @click=\"showFilterPanel = false\" class=\"btn btn-danger\">{{trans('general.cancel')}}</button>\r\n                            <button type=\"button\" class=\"btn btn-info waves-effect waves-light\" @click=\"getReport\">{{trans('general.filter')}}</button>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </transition>\r\n            <div class=\"card\">\r\n                <div class=\"card-body\">\r\n                    <div class=\"table-responsive\" v-if=\"list.total\">\r\n                        <table class=\"table table-sm\">\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>#</th>\r\n                                    <th>{{trans('finance.voucher_number')}}</th>\r\n                                    <th>{{trans('finance.date')}}</th>\r\n                                    <th>{{trans('finance.payment')}}</th>\r\n                                    <th>{{trans('finance.receipt')}}</th>\r\n                                    <th>{{trans('general.description')}}</th>\r\n                                    <th>{{trans('finance.account')}}</th>\r\n                                    <th>{{trans('finance.payment_method')}}</th>\r\n                                    <th>{{trans('general.entry_by')}}</th>\r\n                                </tr>\r\n                            </thead>\r\n                            <tbody>\r\n                                <tr v-for=\"(item, index) in list.data\">\r\n                                    <td>{{index+1}}</td>\r\n                                    <td>{{item.voucher_number}}</td>\r\n                                    <td>{{item.date | moment}}</td>\r\n                                    <td>{{item.type == 'payment' ? item.amount : '-'}}</td>\r\n                                    <td>{{item.type == 'receipt' ? item.amount : '-'}}</td>\r\n                                    <td>{{item.head}}</td>\r\n                                    <td>{{item.account}}</td>\r\n                                    <td>\r\n                                        {{item.payment_method}} <p v-if=\"item.payment_method_detail\" v-html=\"item.payment_method_detail\"></p>\r\n                                    </td>\r\n                                    <td>{{item.employee}}</td>\r\n                                </tr>\r\n                            </tbody>\r\n                            <tfoot>\r\n                                <tr>\r\n                                    <th colspan=\"3\"></th>\r\n                                    <th>{{footer.total_payments}}</th>\r\n                                    <th>{{footer.total_receipts}}</th>\r\n                                    <th colspan=\"4\"></th>\r\n                                </tr>\r\n                            </tfoot>\r\n                        </table>\r\n                    </div>\r\n                    <module-info v-if=\"!list.total\" module=\"finance\" title=\"transaction_day_book_report_module_title\" description=\"transaction_day_book_report_module_description\" icon=\"list\">\r\n                    </module-info>\r\n                    <pagination-record :page-length.sync=\"filter.page_length\" :records=\"list\" @updateRecords=\"getReport\"></pagination-record>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <right-panel :topic=\"help_topic\"></right-panel>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import datepicker from 'vuejs-datepicker'\r\n    import vSelect from 'vue-multiselect'\r\n\r\n    export default {\r\n        components : { vSelect, datepicker },\r\n        data() {\r\n            return {\r\n                list: {\r\n                    total: 0,\r\n                    data: []\r\n                },\r\n                footer: [],\r\n                filter: {\r\n                    sort_by : 'date',\r\n                    order: 'desc',\r\n                    date: '',\r\n                    page_length: helper.getConfig('page_length')\r\n                },\r\n                orderByOptions: [\r\n                    {\r\n                        value: 'created_at',\r\n                        translation: i18n.general.created_at\r\n                    }\r\n                ],\r\n                showFilterPanel: true,\r\n                help_topic: ''\r\n            };\r\n        },\r\n        mounted(){\r\n            if(!helper.hasPermission('access-transaction-report')){\r\n                helper.notAccessibleMsg();\r\n                this.$router.push('/dashboard');\r\n            }\r\n\r\n            this.filter.date = moment().format('YYYY-MM-DD');\r\n            this.getReport();\r\n        },\r\n        methods: {\r\n            hasPermission(permission){\r\n                return helper.hasPermission(permission);\r\n            },\r\n            getReport(page){\r\n                let loader = this.$loading.show();\r\n                if (typeof page !== 'number') {\r\n                    page = 1;\r\n                }\r\n                this.filter.date = helper.toDate(this.filter.date);\r\n                let url = helper.getFilterURL(this.filter);\r\n                axios.get('/api/transaction/report/day-book?page=' + page + url)\r\n                    .then(response => {\r\n                        this.list = response.list;\r\n                        this.footer = response.footer;\r\n                        loader.hide();\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            },\r\n            getConfig(config){\r\n                return helper.getConfig(config);\r\n            },\r\n            print(){\r\n                let loader = this.$loading.show();\r\n                axios.post('/api/transaction/report/day-book/print',{filter: this.filter})\r\n                    .then(response => {\r\n                        let print = window.open(\"/print\");\r\n                        loader.hide();\r\n                        print.document.write(response);\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            },\r\n            pdf(){\r\n                let loader = this.$loading.show();\r\n                axios.post('/api/transaction/report/day-book/pdf',{filter: this.filter})\r\n                    .then(response => {\r\n                        loader.hide();\r\n                        window.open('/download/report/'+response+'?token='+this.authToken);\r\n                    })\r\n                    .catch(error => {\r\n                        loader.hide();\r\n                        helper.showErrorMsg(error);\r\n                    });\r\n            }\r\n        },\r\n        filters: {\r\n          moment(date) {\r\n            return helper.formatDate(date);\r\n          },\r\n          momentDateTime(date) {\r\n            return helper.formatDateTime(date);\r\n          }\r\n        },\r\n        watch: {\r\n            'filter.sort_by': function(val){\r\n                this.getReport();\r\n            },\r\n            'filter.order': function(val){\r\n                this.getReport();\r\n            },\r\n            'filter.page_length': function(val){\r\n                this.getReport();\r\n            }\r\n        },\r\n        computed: {\r\n            authToken(){\r\n                return helper.getAuthToken();\r\n            }\r\n        }\r\n    }\r\n</script>\n\n\n// WEBPACK FOOTER //\n// resources/js/views/finance/transaction/report/day-book.vue"],"mappings":"AAoGA","sourceRoot":""}